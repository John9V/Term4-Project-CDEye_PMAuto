<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
	<h:outputStylesheet library="css" name="styles.css" />
	<title>Project Management System</title>
</h:head>

<h:body>
	<div class="side-bar"></div>

	<div class="header-bar">
		<h3>WP List [Responsible Engineer Cost Estimate]</h3>
		<div class="logout-button">
			<h:form styleClass="">
				<h:commandButton rendered="#{not empty activeEmployeeBean.userName}"
					value="Logout" action="#{activeEmployeeBean.logout}" />
				<h:commandButton rendered="#{empty activeEmployeeBean.userName}"
					value="Login" action="login" />
			</h:form>
		</div>
	</div>

	<ui:fragment rendered="#{not empty activeEmployeeBean.userName}">
		<div class="wplist-header">
			<h2>Work Packages you are the responsible engineer for as
				#{activeEmployeeBean.userName}</h2>
		</div>
		<div class="wplist-form-container">
			<h:form>
				<div class="wplist-search-input-row">
					<span style="margin-right: 16px">Work Package Number: </span>
					<h:inputText value="#{workPackageList.searchPackageNumber}" />
					<h:commandButton styleClass="wplist-button" value="Search"
						action="#{workPackageList.refreshList()}" />
				</div>

				<h:dataTable value="#{workPackageList.listAsRE}" var="wp"
					styleClass="data-table" style="margin:16px 0">
					<h:column>
						<f:facet name="header" style="font-size: 18px">WP Number</f:facet>
						<h:inputText styleClass="edit-input" style="font-size: 18px"
							value="#{wp.workPackageNumber}" rendered="#{wp.editable}" />
						<h:outputText styleClass="edit-output" style="font-size: 18px"
							value="#{wp.workPackageNumber}" rendered="#{not wp.editable}" />
					</h:column>
					<h:column>
						<f:facet name="header">Project Name</f:facet>
						<h:inputText styleClass="edit-input"
							style="font-size: 18px;width:200px"
							value="#{wp.project.projectName}" rendered="#{wp.editable}" />
						<h:outputText styleClass="edit-output" style="font-size: 18px"
							value="#{wp.project.projectName}" rendered="#{not wp.editable}" />
					</h:column>
					<h:column>
						<f:facet name="header">Work Package Budget</f:facet>
						<h:inputText styleClass="edit-input" style="font-size: 18px"
							value="#{wp.projectBudget}" rendered="#{wp.editable}" />
						<h:outputText styleClass="edit-output" style="font-size: 18px"
							value="#{wp.projectBudget}" rendered="#{not wp.editable}" />
					</h:column>
					<h:column>
						<f:facet name="header">Unallocated Budget</f:facet>
						<h:outputText styleClass="edit-output" style="font-size: 18px"
							value="#{wp.calcUnallocatedBudget()}" />
					</h:column>
					<h:column>
						<f:facet name="header">Allocated Budget</f:facet>
						<h:outputText styleClass="edit-output" style="font-size: 18px"
							value="#{wp.calcAllocatedBudget()}" />
					</h:column>
					<h:column>
						<f:facet name="header">Parent WP Number</f:facet>
						<h:inputText styleClass="edit-input" style="font-size: 18px"
							value="#{wp.parentWp.workPackageNumber}"
							rendered="#{wp.editable}" />
						<h:outputText styleClass="edit-output" style="font-size: 18px"
							value="#{wp.parentWp.workPackageNumber}"
							rendered="#{not wp.editable}" />
					</h:column>
					<h:column>
						<f:facet name="header">Edit</f:facet>
						<h:commandButton styleClass="command-button" value="Edit"
							action="#{activeWpBean.setActiveWorkPackage(wp)}" />
					</h:column>
					<h:column>
						<f:facet name="header">Delete</f:facet>
						<h:commandButton styleClass="command-button" value="Delete"
							action="#{workPackageList.deleteWorkPackageIfLeaf(wp)}" />
					</h:column>
				</h:dataTable>

				<h:commandButton styleClass="wplist-button" value="New Work Package"
					style="margin-top: 16px" action="CreateWorkPackage" />
			</h:form>
		</div>
	</ui:fragment>
</h:body>
</html>